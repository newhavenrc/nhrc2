<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <style>
      rect.bordered {
        stroke: #E6E6E6;
        stroke-width:1px;   
      }

      text.mono {
        font-size: 9pt;
        font-family: Consolas, courier;
        fill: #aaa;
      }

      text.axis-workweek {
        fill: #000;
      }

      text.axis-worktime {
        fill: #000;
      }
    </style>
    <!-- <script src="../js/d3.min.js"></script> -->
    <script src="../js/colorbrewer.js"></script>
    <script src="../js/jquery-2.1.3.min.js"></script>
  </head>
  <body>
    <div id="chart"></div>
    Hello

    <script type="text/javascript">

      var neighborhoods = [
        "Amity",
        "Annex",
        "Beaver Hills",
        "Dixwell",
        "Downtown",
        "Dwight",
        "East Rock",
        "East Shore",
        "Edgewood",
        "Fair Haven",
        "Fair Haven Heights",
        "Hill",
        "Long Wharf",
        "Newhallville",
        "Other",
        "Prospect Hill",
        "Quinnipiac",
        "West River",
        "West Rock",
        "Westville",
        "Wooster Square/Mill River"
      ]

      var categories = [
        "Bins for Trash & Recycling",
        "General Bus Request/Incident",
        "Graffiti",
        "Hangers",
        "Health Complaints",
        "Illegal Dumping",
        "Other",
        "Other - city responsibility",
        "Parking Meter",
        "Parks Request",
        "Policing Issue",
        "Post to Neighbors",
        "Potholes",
        "Private Property Issue",
        "Public Space, Streets and Drains",
        "Request for volunteers",
        "Sidewalks and Curb damage",
        "Signs / Bus Shelters / Pavement Markings",
        "SNOW RELATED",
        "Street Lamp",
        "Traffic/Road Safety",
        "Traffic Signal / Pedestrian Signal",
        "Trash & Recycling",
        "Tree Trimming"
      ]

      console.log(neighborhoods);
      console.log(' ');
      console.log(categories);

      //setup the nested objects to store the summed data:
      var heatdata = new Object();
      for (i = 0; i < neighborhoods.length; i++) {
        heatdata[neighborhoods[i]] = {};
        for (j = 0; j < categories.length; j++) {
          heatdata[neighborhoods[i]][categories[j]] = 0;
        }
      }

      //console.log("http://localhost/nhrc2/php/HeatmapData.php?tmCovrg=Tm-Cvrg-All");

      //console.log('start of data:');

      $.getJSON("http://localhost/nhrc2/php/HeatmapData.php?tmCovrg=Tm-Cvrg-All", function(issue){
          var idx = 0;
          $.each(issue, function(){
              console.log(issue[idx]);
              //console.log(issue[idx]['category']);
              //console.log(issue[idx]['neighborhood'] == 'East Rock');
              //document.write(issue+"<br />"); 
              heatdata[issue[idx]['neighborhood']][issue[idx]['category']] += 1;
              document.write(idx+"<br />"); 
              idx += 1;

          });
          for (i = 0; i < neighborhoods.length; i++) {
            for (j = 0; j < categories.length; j++) {
              console.log('neighborhood: '+neighborhoods[i]+' category: '+categories[j]+
                ' count: '+heatdata[neighborhoods[i]][categories[j]]);
            }
          }
      });

    </script>
  </body>
</html>